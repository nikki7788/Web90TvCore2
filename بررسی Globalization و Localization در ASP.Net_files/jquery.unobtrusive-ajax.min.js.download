!function(a){function d(a,b){for(var c=window,d=(a||"").split(".");c&&d.length;)c=c[d.shift()];return"function"==typeof c?c:(b.push(a),Function.constructor.apply(null,b))}function e(a){return"GET"===a||"POST"===a}function f(a,b){!e(b)&&a.setRequestHeader("X-HTTP-Method-Override",b)}function g(b,c,d){var e;d.indexOf("application/x-javascript")===-1&&(e=(b.getAttribute("data-ajax-mode")||"").toUpperCase(),a(b.getAttribute("data-ajax-update")).each(function(b,d){var f;switch(e){case"BEFORE":f=d.firstChild,a("<div />").html(c).contents().each(function(){d.insertBefore(this,f)});break;case"AFTER":a("<div />").html(c).contents().each(function(){d.appendChild(this)});break;default:a(d).html(c)}}))}function h(b,c){var h,i,j,k;h=b.getAttribute("data-ajax-confirm"),h&&!window.confirm(h)||(i=a(b.getAttribute("data-ajax-loading")),k=b.getAttribute("data-ajax-loading-duration")||0,a.extend(c,{type:b.getAttribute("data-ajax-method")||void 0,url:b.getAttribute("data-ajax-url")||void 0,beforeSend:function(a){var c;return f(a,j),c=d(b.getAttribute("data-ajax-begin"),["xhr"]).apply(this,arguments),c!==!1&&i.show(k),c},complete:function(){i.hide(k),d(b.getAttribute("data-ajax-complete"),["xhr","status"]).apply(this,arguments)},success:function(a,c,e){g(b,a,e.getResponseHeader("Content-Type")||"text/html"),d(b.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(this,arguments)},error:d(b.getAttribute("data-ajax-failure"),["xhr","status","error"])}),c.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),j=c.type.toUpperCase(),e(j)||(c.type="POST",c.data.push({name:"X-HTTP-Method-Override",value:j})),a.ajax(c))}function i(b){var d=a(b).data(c);return!d||!d.validate||d.validate()}var b="unobtrusiveAjaxClick",c="unobtrusiveValidation";a(document).on("click","a[data-ajax=true]",function(a){a.preventDefault(),h(this,{url:this.href,type:"GET",data:[]})}),a(document).on("click","form[data-ajax=true] input[type=image]",function(c){var d=c.target.name,e=a(c.target),f=e.parents("form")[0],g=e.offset();a(f).data(b,[{name:d+".x",value:Math.round(c.pageX-g.left)},{name:d+".y",value:Math.round(c.pageY-g.top)}]),setTimeout(function(){a(f).removeData(b)},0)}),a(document).on("click","form[data-ajax=true] :submit",function(c){var d=c.target.name,e=a(c.target).parents("form")[0];a(e).data(b,d?[{name:d,value:c.target.value}]:[]),setTimeout(function(){a(e).removeData(b)},0)}),a(document).on("submit","form[data-ajax=true]",function(c){var d=a(this).data(b)||[];c.preventDefault(),i(this)&&h(this,{url:this.action,type:this.method||"GET",data:d.concat(a(this).serializeArray())})})}(jQuery);