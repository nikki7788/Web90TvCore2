@model IndexViewModel

@{
    ViewData["Title"] = "صفحه اصلی";
}
@{ 
   var adv4= Model.Advertises.Where(a => a.AdvLocation == 4).ToList();
}
<!-- General container-->
<div id="container" class="container-fluid">
    <!--start header-->
        @await Html.PartialAsync("PartialViews/_HeaderPartial", Model.Advertises.Where(a => a.AdvLocation == 1))

    <!--start  navbar-->
    @await Html.PartialAsync("PartialViews/_NavbarPartial")
    <!--End navbar-->
    <!--start content-->
    <div class=" mt-3" id="content">
        <!--start content-body-->
        <div class="row" id="content-body">
            <!--start main content-->
            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">

                <!--start slider or carousel-->
                @await Html.PartialAsync("PartialViews/_SliderPartial", Model.SliderNews)
                <!--end slider or carousel-->
                <!--start the  advers below slider-->
                @foreach (var item in Model.Advertises.Where(a => a.AdvLocation == 2))
                {
                    <div class="advers-main-content">
                        <img src="~/upload/advImage/@item.GifPath" />
                    </div>
                }
                <!--end main advers-->
                <!-- start special news-->
                @await Html.PartialAsync("PartialViews/_SpecialNewsPartial", Model.SpecialNews)
                <!--end special news-->

                @foreach (var item in Model.Advertises.Where(a => a.AdvLocation == 3))
                {
                    <!--start main advers-->
                    <div class="advers-main-content">
                        <img src="~/upload/advImage/@item.GifPath" />
                    </div>
                }


                <!--end main advers-->
                <!--start last-videos-->
                @await Html.PartialAsync("PartialViews/_LastVideosPartial", Model.LastVideos)
                <!--End last videos-->
                <!--start the  advers below lastvideo-->
                <!--یک تبلیغ را نشان میدهد-->

                @if (adv4.Count()>0)
                {
                    <div class="advers-main-content">
                        <a href="@adv4[0].Link"><img src="~/upload/advImage/@adv4[0]" /></a>
                    </div>
                }
            

            </div>   <!--end main content-->
            <!--start list second part-->
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12">
                <!--start last-info-->
                <!--چون این پارشال ویو از چندین مدل تغذیه میکند مدلی در اینجا به ان معرفی نمیکنیم و در پارشال مدل داینامیک میکیریم-->
                @await Html.PartialAsync("PartialViews/_LastInfoPartial")
                <!--end lst-info-->
                <!--start newspapers-->
                @await Html.PartialAsync("PartialViews/_NewspapersPartial")
                <!--end newspapers-->
                <!--start poll-->
                @if (Model.Poll != null)
                {
                    @await Html.PartialAsync("PartialViews/_PollPartial", Model.Poll)

                }
                <!--end poll-->
                <!--start Login-->
                @await Html.PartialAsync("PartialViews/_LoginPartial", Model.LoginVM)
                <!--end Login-->


            </div><!--end list second part-->
            <!--start advers-->
            @await Html.PartialAsync("PartialViews/_AdvertisingPartial", Model.Advertises.Where(a => a.AdvLocation == 5))
            <!--end advers-->
        </div><!--end content-body-->
    </div> <!--end content-->
    <!--start footer-->
    @await Html.PartialAsync("PartialViews/_FooterPartial")
    <!--End footer-->
</div><!--end container-->
@section scripts{
    <script>
        //$(document).ready(function () {

        $("#frmLogin").submit(function (e) {
            e.preventDefault();  //از عمیلیات پیش فرض سابمیت فرم جلوگیری میکند
            var form = $(this);    //تمام مقادیر اینپوت های فرم را میاورد و داخل متغیر میریزد.درپاقع اطلاعات فرم را میخواند

            //   میشود  action تگ هلپرهای ادرس دهی هم در اخر تبدیل به اتریبیوت
            //     asp-area  asp-action   asp-controller  ====> action="/..../.../"
            var url = $("#frmLogin").attr("action"); //آدرسی(کنترلر و اکشن و اریا) که فرم باید به ان ارسال شود را میخواند از روی اتریبیپت های فرم

            $.ajax({

                type: "Post",

                url: url, //     به این روش هم میتوان دستی داد ادرس را '@@Url.Action("action","controller", new { area = ""})'

                data: form.serialize(),

                //اکر ایجکس موفقیت امیز بود ئ ارسال موفق بود
                success: function (msg) {

                    if (msg.status === "success") {

                        window.location.href = '/Adminpanel/User';
                        //window.location.href ='@@Url.Action( "Index", "User")';
                    }
                    else if (msg.status === "failInput") {

                        $("#validationLogin").text("نام کاربری یا رمز عبور اشتباه است");
                    }
                    else if (msg.status === "failEmptyInput") {

                        $("#validationLogin").text("نام کاربری یا رمز عبور وارد نشده است ");
                    }
                }

            });



        });


        //});

    </script>


    <script>
        $('#myTabs a').click(function (e) {
            e.preventDefault()
            $(this).tab('show')
        });
    </script>


}
